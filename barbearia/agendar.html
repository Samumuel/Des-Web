<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/agenda.css">
    <title>Agendar | Barbearia do Rick</title>
</head>
<body id="bodySchedule">

    <header class="headerBack">
        <a class="backButton" href="main-menu.html">
            <i class="bi bi-arrow-left-circle-fill"></i>
        </a>
    </header>
    
    <img id="iconRickandMorty" src="imagens/Rick-and-Morty-4.webp">

    <form id="scheduleForm">
        <div class="scheduleContainer">

            <h2 class="labelSchedule">Data</h2>
            <input type="date" id="scheduleDate" class="inputSchedule" required>

            <h2 class="labelSchedule">Horário</h2>
            <input type="time" id="scheduleTime" class="inputSchedule" placeholder="digite seu e-mail" required>

            <h2 class="labelSchedule">Serviço</h2>
            <div class="checkboxScheduleContainer">
                <label class="checkboxSchedule"><input id="Cabelo" class="checkbox" type="checkbox"> Corte</label>
                <label class="checkboxSchedule"><input id="Barba" class="checkbox" type="checkbox"> Barba</label>
                <label class="checkboxSchedule"><input id="Sobrancelha" class="checkbox" type="checkbox"> Sobrancelha<br></label>
            </div>
            <button type="submit" id="submitSchedule" class="enterButton">Agendar</button>
        </div>
    </form>

    <script>

        const scheduleForm = document.getElementById('scheduleForm');

        scheduleForm.addEventListener('submit', (event) => {

            event.preventDefault();
            const scheduleDate = document.getElementById('scheduleDate').value;
            const scheduleTime = document.getElementById('scheduleTime').value;
            let totalCost = 0;
            const selectedServices = [];
            if (document.getElementById('Cabelo').checked) {
                selectedServices.push('Corte');
                totalCost += 60;
            }
            if (document.getElementById('Barba').checked) {
                selectedServices.push('Barba');
                totalCost += 40;
            }
            if (document.getElementById('Sobrancelha').checked) {
                selectedServices.push('Sobrancelha');
                totalCost += 30;
            }

            let appointmentHistory = JSON.parse(localStorage.getItem('appointmentHistory')) || [];
            appointmentHistory.push({ scheduleDate, scheduleTime, selectedServices, totalCost });
            localStorage.setItem('appointmentHistory', JSON.stringify(appointmentHistory));
            window.location.href = 'main-menu.html';

        });

    </script>

</body>
</html>
